{% paginate collection.products by 48 %}
<section class="collection">
  {% if collection.image != blank %}
    <div class="collection__hero">
      {% include 'product-image-srcset' with
      image: collection.image,
      sizes: '(max-width: 990px) 50vw, (max-width: 860px) 100vw, 70vw'
      preload: true
			%}

      {% if collection.metafields.c_f.video_banner != nil and collection.metafields.c_f.video_banner != 'null' %}
        {% assign video = collection.metafields.c_f.video_banner %}
        {% if collection.metafields.c_f.video_audio == 'true' %}
          {% assign audio = true %}
        {% else %}
          {% assign audio = false %}
        {% endif %}
        {% include 'video', video: video, audio: audio, autoplay: true, background: true %}
      {% endif %}

  			{% if collection.description != blank and
				collection.metafields.c_f.hide_banner_text != 'true' %}
			<div class="collection__description"

        {% if collection.metafields.c_f.banner_text_color %}
          style="color: {{ collection.metafields.c_f.banner_text_color }}"
        {% endif %}
      >
				<h1 class="collection__description__title">
					{% if collection.metafields.c_f.hide_banner_title != 'true' %}
						{{ collection.title }}
					{% endif %}
				</h1>
				<div class="bar"></div>
				<h5 class="collection__description__body">{{ collection.description }}</h5>
			</div>
			{% endif %}
    </div>
  {% endif %}

  <div class="grid {% if collection.metafields.c_f.grid_layout %}collection-grid--{{collection.metafields.c_f.grid_layout}}{% endif %}">
    {% if collection.metafields.c_f.image_1 != nil %}
    <div class="grid__item collection__featured-item collection__featured-image">
      <div class="grid__image">

      {% if collection.metafields.c_f.image_1_type == 'video' %}
        {% assign video = collection.metafields.c_f.image_1 %}
        {% include 'video', autoplay: true, audio: false, video: video, background: true, width: 1200, lazy: true %}
      {% else %}      
        {% 
          include 'cloudinary-image' with
          cloudinary_id: collection.metafields.c_f.image_1,
          sizes: '(max-width: 990px) 50vw, (max-width: 860px) 100vw, 30vw'
          preload: true
        %}
      {% endif %}
      </div>
    </div>
    {% endif %}

    {% if collection.metafields.c_f.image_2 != nil %}
    <div class="grid__item collection__featured-item collection__featured-image">
      <div class="grid__image">
      {% if collection.metafields.c_f.image_2_type == 'video' %}
        {% assign video = collection.metafields.c_f.image_2 %}
        {% include 'video', autoplay: true, audio: false, video: video, background: true, width: 1200, lazy: true %}
      {% else %}      
        {% 
          include 'cloudinary-image' with
          cloudinary_id: collection.metafields.c_f.image_2,
          sizes: '(max-width: 990px) 50vw, (max-width: 860px) 100vw, 30vw'
          preload: true
        %}
      {% endif %}
      </div>
    </div>
    {% endif %}

    {% if collection.metafields.c_f.image_3 != nil %}
    <div class="grid__item collection__featured-item collection__featured-image">
      <div class="grid__image">
      {% if collection.metafields.c_f.image_3_type == 'video' %}
        {% assign video = collection.metafields.c_f.image_3 %}
        {% include 'video', autoplay: true, audio: false, video: video, background: true, width: 1200, lazy: true %}
      {% else %}      
        {% 
          include 'cloudinary-image' with
          cloudinary_id: collection.metafields.c_f.image_3,
          sizes: '(max-width: 990px) 50vw, (max-width: 860px) 100vw, 30vw'
          preload: true
        %}
      {% endif %}
      </div>
    </div>
    {% endif %}

    {% if collection.metafields.c_f.image_4 != nil %}
    <div class="grid__item collection__featured-item collection__featured-image">
      <div class="grid__image">
      {% if collection.metafields.c_f.image_4_type == 'video' %}
        {% assign video = collection.metafields.c_f.image_4 %}
        {% include 'video', autoplay: true, audio: false, video: video, background: true, width: 1200, lazy: true %}
      {% else %}      
        {% 
          include 'cloudinary-image' with
          cloudinary_id: collection.metafields.c_f.image_4,
          sizes: '(max-width: 990px) 50vw, (max-width: 860px) 100vw, 30vw'
          preload: true
        %}
      {% endif %}
      </div>
    </div>
    {% endif %}

    {% if collection.metafields.c_f.image_5 != nil %}
    <div class="grid__item collection__featured-item collection__featured-image">
      <div class="grid__image">
      {% if collection.metafields.c_f.image_5_type == 'video' %}
        {% assign video = collection.metafields.c_f.image_5 %}
        {% include 'video', autoplay: true, audio: false, video: video, background: true, width: 1200, lazy: true %}
      {% else %}      
        {% 
          include 'cloudinary-image' with
          cloudinary_id: collection.metafields.c_f.image_5,
          sizes: '(max-width: 990px) 50vw, (max-width: 860px) 100vw, 30vw'
          preload: true
        %}
      {% endif %}
      </div>
    </div>
    {% endif %}

    {% if collection.metafields.c_f.quote != nil %}
    <div class="grid__item collection__featured-item collection__featured-quote">
      {% if collection.metafields.c_f.quote_background != nil %}
        {% 
          include 'cloudinary-image' with
          cloudinary_id: collection.metafields.c_f.quote_background,
          sizes: '(max-width: 990px) 50vw, (max-width: 860px) 100vw, 70vw',
          preload: true
          class: 'as-background'
        %}

      {% endif %}  
      <h1>“{{collection.metafields.c_f.quote}}”</h1>
      {% if collection.metafields.c_f.quote_byline != nil %}
        <h1 class="collection__featured-quote-byline">—{{collection.metafields.c_f.quote_byline}}</h1>
      {% endif %}
    </div>
    {% endif %}


    {% for product in collection.products %}{% if product.type == 'Product Fee' %}{% continue %}{% endif %}
      {% include 'product-grid-item' with products_per_row %}
    {% else %}
      <p>There are no products in this view.</p>
    {% endfor %}

  </div>

  {% include 'pagination' %}

  {% if collection.metafields.c_f.footer != nil%}
    <div class="collection__footer">
      <h4>{{ collection.metafields.c_f.footer }}</h4>
    </div>
  {% endif %}

</section>

{% endpaginate %}
