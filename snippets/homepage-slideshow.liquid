{% comment %}ly_global_begin{% endcomment %}{% include 'ly-global' %}{% comment %}ly_global_end{% endcomment %}

<section class="homepage-section animate wow fadeIn">
  {% if settings.display-wide %}
  {% else %}
  <div class="row">
    <div class="desktop-12 tablet-6 mobile-3">
      {% endif %}

      {% if settings.homepage-display == 'video' %}
      <div class="videoWrapper">
        {{ settings.video-embed }}
      </div>

      {% elsif settings.homepage-display == 'slideshow' %}
	  <div class="flexslider">
	        <ul class="slides">


	          {% for i in (1..5) %}
	          {% assign slide_show = 'slide-' | append: i | append: '-check' %}

	          {% if settings[slide_show] %}
	          {% assign index = 'slide' | append: i %}
	          {% assign slide_link_url = 'slide' | append: i | append: '_url' %}
	          {% assign slide_img_url = 'slide' | append: i | append: '.jpg' %}
	          {% assign slide_img_alt = 'slide' | append: i | append: '_alt' %}
	          {% assign slide_title = 'slide-' | append: i | append: '-title' %}
	          {% assign slide_caption = 'slide-' | append: i | append: '-caption' %}
	          {% assign slide_button = 'slide-' | append: i | append: '-button' %}
	          {% assign slide_button_text = 'slide-' | append: i | append: '-button-text' %}        

	          <li>
	            <a href="{{ settings[slide_link_url] }}">
	              <img src="{% comment %}ly_asset_replace_for_[ slide_img_url | asset_url ]_begin{% endcomment %}{% assign ly_asset = slide_img_url %}{% include 'ly-asset' with ly_asset %}{{ ly_translation  }}{% comment %}ly_asset_replace_end{% endcomment %}" alt="{{ settings[slide_img_alt] }}" />
	            </a>
	            <div class="flex-caption {{ index }}">
	  			{% if settings[slide_title] != blank %}                        
	              <h2 class="slide-title">{{ settings[slide_title] }}</h2>
	              {% endif %}
	  			{% if settings[slide_caption] != blank %}            
	              <p class="caption">{{ settings[slide_caption] }}</p>
	              {% endif %}
	              {% if settings[slide_button] %}
	              <div class="cta">
	                <a href="{{ settings[slide_link_url] }}">{{ settings[slide_button_text] }}</a>
	              </div>
	              {% endif %}            
	            </div>
	          </li>
	          {% endif %}
	          {% endfor %}
	        </ul>
	      </div>
      {% endif %} 

      {% if settings.display-wide %}
      {% else %}
    </div>
  </div>
    {% endif %}    
<div class="clear"></div>  
</section>

<style>
	.homepage-section li > a {
    	display: block; 
    }
  
  	.homepage-section li > a > span {
      background: transparent url(https://cdn.shopify.com/s/files/1/1105/2238/t/14/assets/slide2.jpg?4491222695233331091) no-repeat scroll 0 0;
      background-size: cover;
      position: absolute;
      left: 0px;
      top: 0px;
      display: block;
      width: 0px;
      height: 100%;
    }
</style>

<script>
  if (window.location.search.indexOf('hover=true') >= 0) {
    var a = document.querySelector('.homepage-section li > a');
   	var span = document.createElement('span');
    a.appendChild(span);
    
    a.onmousemove = function(e) {
      var pos = this.getBoundingClientRect();
      var insidePos = Math.round(e.clientX - pos.left);
      var innerWidth = (insidePos / pos.width) * 100;
      span.style.width = innerWidth + '%';
	}

    a.onmouseleave = function(e) {
      var width = parseInt(span.style.width);

      if (width > 50) {
        span.style.width = '100%';
      } else {
        span.style.width = 0;   
      }
    }
  }
</script>