{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/stepsForm.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","/Users/Joseph/Sites/spinelli-kilcollin/shopify/src/js/stepsForm.js","module","window","extend","b","key","hasOwnProperty","stepsForm","el","options","this","_init","transEndEventNames","WebkitTransition","MozTransition","OTransition","msTransition","transition","transEndEventName","Modernizr","prefixed","support","transitions","csstransitions","prototype","onSubmit","current","questions","slice","querySelectorAll","questionsCount","classie","addClass","ctrlNext","querySelector","progress","questionStatus","currentNum","innerHTML","Number","totalQuestionNum","error","_initEvents","self","firstElInput","onFocusStartFn","removeEventListener","addEventListener","ev","preventDefault","_nextQuestion","document","keyCode","which","_validade","isFilled","_clearError","currentQuestion","_progress","_updateQuestionNumber","nextQuestion","removeClass","onEndTransitionFn","_submit","nextQuestionNum","removeChild","focus","style","width","createElement","className","appendChild","input","value","_showError","err","message"],"mappings":"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","file":"stepsForm.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",";( function( window ) {\n\n\t'use strict';\n\n\tvar transEndEventNames = {\n\t\t\t'WebkitTransition': 'webkitTransitionEnd',\n\t\t\t'MozTransition': 'transitionend',\n\t\t\t'OTransition': 'oTransitionEnd',\n\t\t\t'msTransition': 'MSTransitionEnd',\n\t\t\t'transition': 'transitionend'\n\t\t},\n\t\ttransEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ],\n\t\tsupport = { transitions : Modernizr.csstransitions };\n\n\tfunction extend( a, b ) {\n\t\tfor( var key in b ) {\n\t\t\tif( b.hasOwnProperty( key ) ) {\n\t\t\t\ta[key] = b[key];\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t}\n\n\tfunction stepsForm( el, options ) {\n\t\tthis.el = el;\n\t\tthis.options = extend( {}, this.options );\n  \t\textend( this.options, options );\n  \t\tthis._init();\n\t}\n\n\tstepsForm.prototype.options = {\n\t\tonSubmit : function() { return false; }\n\t};\n\n\tstepsForm.prototype._init = function() {\n\t\t// current question\n\t\tthis.current = 0;\n\n\t\t// questions\n\t\tthis.questions = [].slice.call( this.el.querySelectorAll( 'ol.questions > li' ) );\n\t\t// total questions\n\t\tthis.questionsCount = this.questions.length;\n\t\t// show first question\n\t\tclassie.addClass( this.questions[0], 'current' );\n\n\t\t// next question control\n\t\tthis.ctrlNext = this.el.querySelector( 'button.next' );\n\n\t\t// progress bar\n\t\tthis.progress = this.el.querySelector( 'div.progress' );\n\n\t\t// question number status\n\t\tthis.questionStatus = this.el.querySelector( 'span.number' );\n\t\t// current question placeholder\n\t\tthis.currentNum = this.questionStatus.querySelector( 'span.number-current' );\n\t\tthis.currentNum.innerHTML = Number( this.current + 1 );\n\t\t// total questions placeholder\n\t\tthis.totalQuestionNum = this.questionStatus.querySelector( 'span.number-total' );\n\t\tthis.totalQuestionNum.innerHTML = this.questionsCount;\n\n\t\t// error message\n\t\tthis.error = this.el.querySelector( 'span.error-message' );\n\n\t\t// init events\n\t\tthis._initEvents();\n\t};\n\n\tstepsForm.prototype._initEvents = function() {\n\t\tvar self = this,\n\t\t\t// first input\n\t\t\tfirstElInput = this.questions[ this.current ].querySelector( 'input' ),\n\t\t\t// focus\n\t\t\tonFocusStartFn = function() {\n\t\t\t\tfirstElInput.removeEventListener( 'focus', onFocusStartFn );\n\t\t\t\tclassie.addClass( self.ctrlNext, 'show' );\n\t\t\t};\n\n\t\t// show the next question control first time the input gets focused\n\t\tfirstElInput.addEventListener( 'focus', onFocusStartFn );\n\n\t\t// show next question\n\t\tthis.ctrlNext.addEventListener( 'click', function( ev ) {\n\t\t\tev.preventDefault();\n\t\t\tself._nextQuestion();\n\t\t} );\n\n\t\t// pressing enter will jump to next question\n\t\tdocument.addEventListener( 'keydown', function( ev ) {\n\t\t\tvar keyCode = ev.keyCode || ev.which;\n\t\t\t// enter\n\t\t\tif( keyCode === 13 ) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tself._nextQuestion();\n\t\t\t}\n\t\t} );\n\n\t\t// disable tab\n\t\tthis.el.addEventListener( 'keydown', function( ev ) {\n\t\t\tvar keyCode = ev.keyCode || ev.which;\n\t\t\t// tab\n\t\t\tif( keyCode === 9 ) {\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t} );\n\t};\n\n\tstepsForm.prototype._nextQuestion = function() {\n\t\tif( !this._validade() ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// check if form is filled\n\t\tif( this.current === this.questionsCount - 1 ) {\n\t\t\tthis.isFilled = true;\n\t\t}\n\n\t\t// clear any previous error messages\n\t\tthis._clearError();\n\n\t\t// current question\n\t\tvar currentQuestion = this.questions[ this.current ];\n\n\t\t// increment current question iterator\n\t\t++this.current;\n\n\t\t// update progress bar\n\t\tthis._progress();\n\n\t\tif( !this.isFilled ) {\n\t\t\t// change the current question number/status\n\t\t\tthis._updateQuestionNumber();\n\n\t\t\t// add class \"show-next\" to form element (start animations)\n\t\t\tclassie.addClass( this.el, 'show-next' );\n\n\t\t\t// remove class \"current\" from current question and add it to the next one\n\t\t\t// current question\n\t\t\tvar nextQuestion = this.questions[ this.current ];\n\t\t\tclassie.removeClass( currentQuestion, 'current' );\n\t\t\tclassie.addClass( nextQuestion, 'current' );\n\t\t}\n\n\t\t// after animation ends, remove class \"show-next\" from form element and change current question placeholder\n\t\tvar self = this,\n\t\t\tonEndTransitionFn = function( ev ) {\n\t\t\t\tif( support.transitions ) {\n\t\t\t\t\tthis.removeEventListener( transEndEventName, onEndTransitionFn );\n\t\t\t\t}\n\t\t\t\tif( self.isFilled ) {\n\t\t\t\t\tself._submit();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tclassie.removeClass( self.el, 'show-next' );\n\t\t\t\t\tself.currentNum.innerHTML = self.nextQuestionNum.innerHTML;\n\t\t\t\t\tself.questionStatus.removeChild( self.nextQuestionNum );\n\t\t\t\t\t// force the focus on the next input\n\t\t\t\t\tnextQuestion.querySelector( 'input' ).focus();\n\t\t\t\t}\n\t\t\t};\n\n\t\tif( support.transitions ) {\n\t\t\tthis.progress.addEventListener( transEndEventName, onEndTransitionFn );\n\t\t}\n\t\telse {\n\t\t\tonEndTransitionFn();\n\t\t}\n\t}\n\n\t// updates the progress bar by setting its width\n\tstepsForm.prototype._progress = function() {\n\t\tthis.progress.style.width = this.current * ( 100 / this.questionsCount ) + '%';\n\t}\n\n\t// changes the current question number\n\tstepsForm.prototype._updateQuestionNumber = function() {\n\t\t// first, create next question number placeholder\n\t\tthis.nextQuestionNum = document.createElement( 'span' );\n\t\tthis.nextQuestionNum.className = 'number-next';\n\t\tthis.nextQuestionNum.innerHTML = Number( this.current + 1 );\n\t\t// insert it in the DOM\n\t\tthis.questionStatus.appendChild( this.nextQuestionNum );\n\t}\n\n\t// submits the form\n\tstepsForm.prototype._submit = function() {\n\t\tthis.options.onSubmit( this.el );\n\t}\n\n\t// TODO (next version..)\n\t// the validation function\n\tstepsForm.prototype._validade = function() {\n\t\t// current questionÂ´s input\n\t\tvar input = this.questions[ this.current ].querySelector( 'input' ).value;\n\t\tif( input === '' ) {\n\t\t\tthis._showError( 'EMPTYSTR' );\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// TODO (next version..)\n\tstepsForm.prototype._showError = function( err ) {\n\t\tvar message = '';\n\t\tswitch( err ) {\n\t\t\tcase 'EMPTYSTR' :\n\t\t\t\tmessage = 'Please fill the field before continuing';\n\t\t\t\tbreak;\n\t\t\tcase 'INVALIDEMAIL' :\n\t\t\t\tmessage = 'Please fill a valid email address';\n\t\t\t\tbreak;\n\t\t\t// ...\n\t\t};\n\t\tthis.error.innerHTML = message;\n\t\tclassie.addClass( this.error, 'show' );\n\t}\n\n\t// clears/hides the current error message\n\tstepsForm.prototype._clearError = function() {\n\t\tclassie.removeClass( this.error, 'show' );\n\t}\n\n\t// add to global namespace\n\twindow.stepsForm = stepsForm;\n\n})( window );\n"]}