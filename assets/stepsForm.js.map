{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/stepsForm.js"],"names":[],"mappings":"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","file":"stepsForm.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",";(function(window) {\n\t'use strict'\n\n\tvar transEndEventNames = {\n\t\t\tWebkitTransition: 'webkitTransitionEnd',\n\t\t\tMozTransition: 'transitionend',\n\t\t\tOTransition: 'oTransitionEnd',\n\t\t\tmsTransition: 'MSTransitionEnd',\n\t\t\ttransition: 'transitionend',\n\t\t},\n\t\ttransEndEventName = transEndEventNames[Modernizr.prefixed('transition')],\n\t\tsupport = { transitions: Modernizr.csstransitions }\n\n\tfunction extend(a, b) {\n\t\tfor (var key in b) {\n\t\t\tif (b.hasOwnProperty(key)) {\n\t\t\t\ta[key] = b[key]\n\t\t\t}\n\t\t}\n\t\treturn a\n\t}\n\n\tfunction stepsForm(el, options) {\n\t\tthis.el = el\n\t\tthis.options = extend({}, this.options)\n\t\textend(this.options, options)\n\t\tthis._init()\n\t}\n\n\tstepsForm.prototype.options = {\n\t\tonSubmit: function() {\n\t\t\treturn false\n\t\t},\n\t}\n\n\tstepsForm.prototype._init = function() {\n\t\t// current question\n\t\tthis.current = 0\n\n\t\t// questions\n\t\tthis.questions = [].slice.call(\n\t\t\tthis.el.querySelectorAll('ol.questions > li'),\n\t\t)\n\t\t// total questions\n\t\tthis.questionsCount = this.questions.length\n\t\t// show first question\n\t\tclassie.addClass(this.questions[0], 'current')\n\n\t\t// next question control\n\t\tthis.ctrlNext = this.el.querySelector('button.next')\n\n\t\t// progress bar\n\t\tthis.progress = this.el.querySelector('div.progress')\n\n\t\t// question number status\n\t\tthis.questionStatus = this.el.querySelector('span.number')\n\t\t// current question placeholder\n\t\tthis.currentNum = this.questionStatus.querySelector('span.number-current')\n\t\tthis.currentNum.innerHTML = Number(this.current + 1)\n\t\t// total questions placeholder\n\t\tthis.totalQuestionNum = this.questionStatus.querySelector(\n\t\t\t'span.number-total',\n\t\t)\n\t\tthis.totalQuestionNum.innerHTML = this.questionsCount\n\n\t\t// error message\n\t\tthis.error = this.el.querySelector('span.error-message')\n\n\t\t// init events\n\t\tthis._initEvents()\n\t}\n\n\tstepsForm.prototype._initEvents = function() {\n\t\tvar self = this,\n\t\t\t// first input\n\t\t\tfirstElInput = this.questions[this.current].querySelector('input'),\n\t\t\t// focus\n\t\t\tonFocusStartFn = function() {\n\t\t\t\tfirstElInput.removeEventListener('focus', onFocusStartFn)\n\t\t\t\tclassie.addClass(self.ctrlNext, 'show')\n\t\t\t}\n\n\t\t// show the next question control first time the input gets focused\n\t\tfirstElInput.addEventListener('focus', onFocusStartFn)\n\n\t\t// show next question\n\t\tthis.ctrlNext.addEventListener('click', function(ev) {\n\t\t\tev.preventDefault()\n\t\t\tself._nextQuestion()\n\t\t})\n\n\t\t// pressing enter will jump to next question\n\t\tdocument.addEventListener('keydown', function(ev) {\n\t\t\tvar keyCode = ev.keyCode || ev.which\n\t\t\t// enter\n\t\t\tif (keyCode === 13) {\n\t\t\t\tev.preventDefault()\n\t\t\t\tself._nextQuestion()\n\t\t\t}\n\t\t})\n\n\t\t// disable tab\n\t\tthis.el.addEventListener('keydown', function(ev) {\n\t\t\tvar keyCode = ev.keyCode || ev.which\n\t\t\t// tab\n\t\t\tif (keyCode === 9) {\n\t\t\t\tev.preventDefault()\n\t\t\t}\n\t\t})\n\t}\n\n\tstepsForm.prototype._nextQuestion = function() {\n\t\tif (!this._validade()) {\n\t\t\treturn false\n\t\t}\n\n\t\t// check if form is filled\n\t\tif (this.current === this.questionsCount - 1) {\n\t\t\tthis.isFilled = true\n\t\t}\n\n\t\t// clear any previous error messages\n\t\tthis._clearError()\n\n\t\t// current question\n\t\tvar currentQuestion = this.questions[this.current]\n\n\t\t// increment current question iterator\n\t\t++this.current\n\n\t\t// update progress bar\n\t\tthis._progress()\n\n\t\tif (!this.isFilled) {\n\t\t\t// change the current question number/status\n\t\t\tthis._updateQuestionNumber()\n\n\t\t\t// add class \"show-next\" to form element (start animations)\n\t\t\tclassie.addClass(this.el, 'show-next')\n\n\t\t\t// remove class \"current\" from current question and add it to the next one\n\t\t\t// current question\n\t\t\tvar nextQuestion = this.questions[this.current]\n\t\t\tclassie.removeClass(currentQuestion, 'current')\n\t\t\tclassie.addClass(nextQuestion, 'current')\n\t\t}\n\n\t\t// after animation ends, remove class \"show-next\" from form element and change current question placeholder\n\t\tvar self = this,\n\t\t\tonEndTransitionFn = function(ev) {\n\t\t\t\tif (support.transitions) {\n\t\t\t\t\tthis.removeEventListener(transEndEventName, onEndTransitionFn)\n\t\t\t\t}\n\t\t\t\tif (self.isFilled) {\n\t\t\t\t\tself._submit()\n\t\t\t\t} else {\n\t\t\t\t\tclassie.removeClass(self.el, 'show-next')\n\t\t\t\t\tself.currentNum.innerHTML = self.nextQuestionNum.innerHTML\n\t\t\t\t\tself.questionStatus.removeChild(self.nextQuestionNum)\n\t\t\t\t\t// force the focus on the next input\n\t\t\t\t\tnextQuestion.querySelector('input').focus()\n\t\t\t\t}\n\t\t\t}\n\n\t\tif (support.transitions) {\n\t\t\tthis.progress.addEventListener(transEndEventName, onEndTransitionFn)\n\t\t} else {\n\t\t\tonEndTransitionFn()\n\t\t}\n\t}\n\n\t// updates the progress bar by setting its width\n\tstepsForm.prototype._progress = function() {\n\t\tthis.progress.style.width = this.current * (100 / this.questionsCount) + '%'\n\t}\n\n\t// changes the current question number\n\tstepsForm.prototype._updateQuestionNumber = function() {\n\t\t// first, create next question number placeholder\n\t\tthis.nextQuestionNum = document.createElement('span')\n\t\tthis.nextQuestionNum.className = 'number-next'\n\t\tthis.nextQuestionNum.innerHTML = Number(this.current + 1)\n\t\t// insert it in the DOM\n\t\tthis.questionStatus.appendChild(this.nextQuestionNum)\n\t}\n\n\t// submits the form\n\tstepsForm.prototype._submit = function() {\n\t\tthis.options.onSubmit(this.el)\n\t}\n\n\t// TODO (next version..)\n\t// the validation function\n\tstepsForm.prototype._validade = function() {\n\t\t// current question´s input\n\t\tvar input = this.questions[this.current].querySelector('input').value\n\t\tif (input === '') {\n\t\t\tthis._showError('EMPTYSTR')\n\t\t\treturn false\n\t\t}\n\n\t\treturn true\n\t}\n\n\t// TODO (next version..)\n\tstepsForm.prototype._showError = function(err) {\n\t\tvar message = ''\n\t\tswitch (err) {\n\t\t\tcase 'EMPTYSTR':\n\t\t\t\tmessage = 'Please fill the field before continuing'\n\t\t\t\tbreak\n\t\t\tcase 'INVALIDEMAIL':\n\t\t\t\tmessage = 'Please fill a valid email address'\n\t\t\t\tbreak\n\t\t\t// ...\n\t\t}\n\t\tthis.error.innerHTML = message\n\t\tclassie.addClass(this.error, 'show')\n\t}\n\n\t// clears/hides the current error message\n\tstepsForm.prototype._clearError = function() {\n\t\tclassie.removeClass(this.error, 'show')\n\t}\n\n\t// add to global namespace\n\twindow.stepsForm = stepsForm\n})(window)\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvc3RlcHNGb3JtLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxDQUFDLENBQUMsVUFBUyxNQUFULEVBQWlCO0FBQ2xCOztBQUVBLEtBQUkscUJBQXFCO0FBQ3ZCLG9CQUFrQixxQkFESztBQUV2QixpQkFBZSxlQUZRO0FBR3ZCLGVBQWEsZ0JBSFU7QUFJdkIsZ0JBQWMsaUJBSlM7QUFLdkIsY0FBWTtBQUxXLEVBQXpCO0FBQUEsS0FPQyxvQkFBb0IsbUJBQW1CLFVBQVUsUUFBVixDQUFtQixZQUFuQixDQUFuQixDQVByQjtBQUFBLEtBUUMsVUFBVSxFQUFFLGFBQWEsVUFBVSxjQUF6QixFQVJYOztBQVVBLFVBQVMsTUFBVCxDQUFnQixDQUFoQixFQUFtQixDQUFuQixFQUFzQjtBQUNyQixPQUFLLElBQUksR0FBVCxJQUFnQixDQUFoQixFQUFtQjtBQUNsQixPQUFJLEVBQUUsY0FBRixDQUFpQixHQUFqQixDQUFKLEVBQTJCO0FBQzFCLE1BQUUsR0FBRixJQUFTLEVBQUUsR0FBRixDQUFUO0FBQ0E7QUFDRDtBQUNELFNBQU8sQ0FBUDtBQUNBOztBQUVELFVBQVMsU0FBVCxDQUFtQixFQUFuQixFQUF1QixPQUF2QixFQUFnQztBQUMvQixPQUFLLEVBQUwsR0FBVSxFQUFWO0FBQ0EsT0FBSyxPQUFMLEdBQWUsT0FBTyxFQUFQLEVBQVcsS0FBSyxPQUFoQixDQUFmO0FBQ0EsU0FBTyxLQUFLLE9BQVosRUFBcUIsT0FBckI7QUFDQSxPQUFLLEtBQUw7QUFDQTs7QUFFRCxXQUFVLFNBQVYsQ0FBb0IsT0FBcEIsR0FBOEI7QUFDN0IsWUFBVSxvQkFBVztBQUNwQixVQUFPLEtBQVA7QUFDQTtBQUg0QixFQUE5Qjs7QUFNQSxXQUFVLFNBQVYsQ0FBb0IsS0FBcEIsR0FBNEIsWUFBVztBQUN0QztBQUNBLE9BQUssT0FBTCxHQUFlLENBQWY7O0FBRUE7QUFDQSxP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QVUsU0FBVixDQUFvQixXQUFwQixHQUFrQyxZQUFXO0FBQzVDLFVBQVEsV0FBUixDQUFvQixLQUFLLEtBQXpCLEVBQWdDLE1BQWhDO0FBQ0EsRUFGRDs7QUFJQTtBQUNBLFFBQU8sU0FBUCxHQUFtQixTQUFuQjtBQUNBLENBbk9BLEVBbU9FLE1Bbk9GIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIjsoZnVuY3Rpb24od2luZG93KSB7XG5cdCd1c2Ugc3RyaWN0J1xuXG5cdHZhciB0cmFuc0VuZEV2ZW50TmFtZXMgPSB7XG5cdFx0XHRXZWJraXRUcmFuc2l0aW9uOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG5cdFx0XHRNb3pUcmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcsXG5cdFx0XHRPVHJhbnNpdGlvbjogJ29UcmFuc2l0aW9uRW5kJyxcblx0XHRcdG1zVHJhbnNpdGlvbjogJ01TVHJhbnNpdGlvbkVuZCcsXG5cdFx0XHR0cmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcsXG5cdFx0fSxcblx0XHR0cmFuc0VuZEV2ZW50TmFtZSA9IHRyYW5zRW5kRXZlbnROYW1lc1tNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zaXRpb24nKV0sXG5cdFx0c3VwcG9ydCA9IHsgdHJhbnNpdGlvbnM6IE1vZGVybml6ci5jc3N0cmFuc2l0aW9ucyB9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKGEsIGIpIHtcblx0XHRmb3IgKHZhciBrZXkgaW4gYikge1xuXHRcdFx0aWYgKGIuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRhW2tleV0gPSBiW2tleV1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGFcblx0fVxuXG5cdGZ1bmN0aW9uIHN0ZXBzRm9ybShlbCwgb3B0aW9ucykge1xuXHRcdHRoaXMuZWwgPSBlbFxuXHRcdHRoaXMub3B0aW9ucyA9IGV4dGVuZCh7fSwgdGhpcy5vcHRpb25zKVxuXHRcdGV4dGVuZCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG5cdFx0dGhpcy5faW5pdCgpXG5cdH1cblxuXHRzdGVwc0Zvcm0ucHJvdG90eXBlLm9wdGlvbnMgPSB7XG5cdFx0b25TdWJtaXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0fSxcblx0fVxuXG5cdHN0ZXBzRm9ybS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbigpIHtcblx0XHQvLyBjdXJyZW50IHF1ZXN0aW9uXG5cdFx0dGhpcy5jdXJyZW50ID0gMFxuXG5cdFx0Ly8gcXVlc3Rpb25zXG5cdFx0dGhpcy5xdWVzdGlvbnMgPSBbXS5zbGljZS5jYWxsKFxuXHRcdFx0dGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdvbC5xdWVzdGlvbnMgPiBsaScpLFxuXHRcdClcblx0XHQvLyB0b3RhbCBxdWVzdGlvbnNcblx0XHR0aGlzLnF1ZXN0aW9uc0NvdW50ID0gdGhpcy5xdWVzdGlvbnMubGVuZ3RoXG5cdFx0Ly8gc2hvdyBmaXJzdCBxdWVzdGlvblxuXHRcdGNsYXNzaWUuYWRkQ2xhc3ModGhpcy5xdWVzdGlvbnNbMF0sICdjdXJyZW50JylcblxuXHRcdC8vIG5leHQgcXVlc3Rpb24gY29udHJvbFxuXHRcdHRoaXMuY3RybE5leHQgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5uZXh0JylcblxuXHRcdC8vIHByb2dyZXNzIGJhclxuXHRcdHRoaXMucHJvZ3Jlc3MgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wcm9ncmVzcycpXG5cblx0XHQvLyBxdWVzdGlvbiBudW1iZXIgc3RhdHVzXG5cdFx0dGhpcy5xdWVzdGlvblN0YXR1cyA9IHRoaXMuZWwucXVlcnlTZWxlY3Rvcignc3Bhbi5udW1iZXInKVxuXHRcdC8vIGN1cnJlbnQgcXVlc3Rpb24gcGxhY2Vob2xkZXJcblx0XHR0aGlzLmN1cnJlbnROdW0gPSB0aGlzLnF1ZXN0aW9uU3RhdHVzLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4ubnVtYmVyLWN1cnJlbnQnKVxuXHRcdHRoaXMuY3VycmVudE51bS5pbm5lckhUTUwgPSBOdW1iZXIodGhpcy5jdXJyZW50ICsgMSlcblx0XHQvLyB0b3RhbCBxdWVzdGlvbnMgcGxhY2Vob2xkZXJcblx0XHR0aGlzLnRvdGFsUXVlc3Rpb25OdW0gPSB0aGlzLnF1ZXN0aW9uU3RhdHVzLnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHQnc3Bhbi5udW1iZXItdG90YWwnLFxuXHRcdClcblx0XHR0aGlzLnRvdGFsUXVlc3Rpb25OdW0uaW5uZXJIVE1MID0gdGhpcy5xdWVzdGlvbnNDb3VudFxuXG5cdFx0Ly8gZXJyb3IgbWVzc2FnZVxuXHRcdHRoaXMuZXJyb3IgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4uZXJyb3ItbWVzc2FnZScpXG5cblx0XHQvLyBpbml0IGV2ZW50c1xuXHRcdHRoaXMuX2luaXRFdmVudHMoKVxuXHR9XG5cblx0c3RlcHNGb3JtLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdC8vIGZpcnN0IGlucHV0XG5cdFx0XHRmaXJzdEVsSW5wdXQgPSB0aGlzLnF1ZXN0aW9uc1t0aGlzLmN1cnJlbnRdLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JyksXG5cdFx0XHQvLyBmb2N1c1xuXHRcdFx0b25Gb2N1c1N0YXJ0Rm4gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Zmlyc3RFbElucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgb25Gb2N1c1N0YXJ0Rm4pXG5cdFx0XHRcdGNsYXNzaWUuYWRkQ2xhc3Moc2VsZi5jdHJsTmV4dCwgJ3Nob3cnKVxuXHRcdFx0fVxuXG5cdFx0Ly8gc2hvdyB0aGUgbmV4dCBxdWVzdGlvbiBjb250cm9sIGZpcnN0IHRpbWUgdGhlIGlucHV0IGdldHMgZm9jdXNlZFxuXHRcdGZpcnN0RWxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIG9uRm9jdXNTdGFydEZuKVxuXG5cdFx0Ly8gc2hvdyBuZXh0IHF1ZXN0aW9uXG5cdFx0dGhpcy5jdHJsTmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRldi5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHRzZWxmLl9uZXh0UXVlc3Rpb24oKVxuXHRcdH0pXG5cblx0XHQvLyBwcmVzc2luZyBlbnRlciB3aWxsIGp1bXAgdG8gbmV4dCBxdWVzdGlvblxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldikge1xuXHRcdFx0dmFyIGtleUNvZGUgPSBldi5rZXlDb2RlIHx8IGV2LndoaWNoXG5cdFx0XHQvLyBlbnRlclxuXHRcdFx0aWYgKGtleUNvZGUgPT09IDEzKSB7XG5cdFx0XHRcdGV2LnByZXZlbnREZWZhdWx0KClcblx0XHRcdFx0c2VsZi5fbmV4dFF1ZXN0aW9uKClcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0Ly8gZGlzYWJsZSB0YWJcblx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldikge1xuXHRcdFx0dmFyIGtleUNvZGUgPSBldi5rZXlDb2RlIHx8IGV2LndoaWNoXG5cdFx0XHQvLyB0YWJcblx0XHRcdGlmIChrZXlDb2RlID09PSA5KSB7XG5cdFx0XHRcdGV2LnByZXZlbnREZWZhdWx0KClcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0c3RlcHNGb3JtLnByb3RvdHlwZS5fbmV4dFF1ZXN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCF0aGlzLl92YWxpZGFkZSgpKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHR9XG5cblx0XHQvLyBjaGVjayBpZiBmb3JtIGlzIGZpbGxlZFxuXHRcdGlmICh0aGlzLmN1cnJlbnQgPT09IHRoaXMucXVlc3Rpb25zQ291bnQgLSAxKSB7XG5cdFx0XHR0aGlzLmlzRmlsbGVkID0gdHJ1ZVxuXHRcdH1cblxuXHRcdC8vIGNsZWFyIGFueSBwcmV2aW91cyBlcnJvciBtZXNzYWdlc1xuXHRcdHRoaXMuX2NsZWFyRXJyb3IoKVxuXG5cdFx0Ly8gY3VycmVudCBxdWVzdGlvblxuXHRcdHZhciBjdXJyZW50UXVlc3Rpb24gPSB0aGlzLnF1ZXN0aW9uc1t0aGlzLmN1cnJlbnRdXG5cblx0XHQvLyBpbmNyZW1lbnQgY3VycmVudCBxdWVzdGlvbiBpdGVyYXRvclxuXHRcdCsrdGhpcy5jdXJyZW50XG5cblx0XHQvLyB1cGRhdGUgcHJvZ3Jlc3MgYmFyXG5cdFx0dGhpcy5fcHJvZ3Jlc3MoKVxuXG5cdFx0aWYgKCF0aGlzLmlzRmlsbGVkKSB7XG5cdFx0XHQvLyBjaGFuZ2UgdGhlIGN1cnJlbnQgcXVlc3Rpb24gbnVtYmVyL3N0YXR1c1xuXHRcdFx0dGhpcy5fdXBkYXRlUXVlc3Rpb25OdW1iZXIoKVxuXG5cdFx0XHQvLyBhZGQgY2xhc3MgXCJzaG93LW5leHRcIiB0byBmb3JtIGVsZW1lbnQgKHN0YXJ0IGFuaW1hdGlvbnMpXG5cdFx0XHRjbGFzc2llLmFkZENsYXNzKHRoaXMuZWwsICdzaG93LW5leHQnKVxuXG5cdFx0XHQvLyByZW1vdmUgY2xhc3MgXCJjdXJyZW50XCIgZnJvbSBjdXJyZW50IHF1ZXN0aW9uIGFuZCBhZGQgaXQgdG8gdGhlIG5leHQgb25lXG5cdFx0XHQvLyBjdXJyZW50IHF1ZXN0aW9uXG5cdFx0XHR2YXIgbmV4dFF1ZXN0aW9uID0gdGhpcy5xdWVzdGlvbnNbdGhpcy5jdXJyZW50XVxuXHRcdFx0Y2xhc3NpZS5yZW1vdmVDbGFzcyhjdXJyZW50UXVlc3Rpb24sICdjdXJyZW50Jylcblx0XHRcdGNsYXNzaWUuYWRkQ2xhc3MobmV4dFF1ZXN0aW9uLCAnY3VycmVudCcpXG5cdFx0fVxuXG5cdFx0Ly8gYWZ0ZXIgYW5pbWF0aW9uIGVuZHMsIHJlbW92ZSBjbGFzcyBcInNob3ctbmV4dFwiIGZyb20gZm9ybSBlbGVtZW50IGFuZCBjaGFuZ2UgY3VycmVudCBxdWVzdGlvbiBwbGFjZWhvbGRlclxuXHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdG9uRW5kVHJhbnNpdGlvbkZuID0gZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0aWYgKHN1cHBvcnQudHJhbnNpdGlvbnMpIHtcblx0XHRcdFx0XHR0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNFbmRFdmVudE5hbWUsIG9uRW5kVHJhbnNpdGlvbkZuKVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChzZWxmLmlzRmlsbGVkKSB7XG5cdFx0XHRcdFx0c2VsZi5fc3VibWl0KClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjbGFzc2llLnJlbW92ZUNsYXNzKHNlbGYuZWwsICdzaG93LW5leHQnKVxuXHRcdFx0XHRcdHNlbGYuY3VycmVudE51bS5pbm5lckhUTUwgPSBzZWxmLm5leHRRdWVzdGlvbk51bS5pbm5lckhUTUxcblx0XHRcdFx0XHRzZWxmLnF1ZXN0aW9uU3RhdHVzLnJlbW92ZUNoaWxkKHNlbGYubmV4dFF1ZXN0aW9uTnVtKVxuXHRcdFx0XHRcdC8vIGZvcmNlIHRoZSBmb2N1cyBvbiB0aGUgbmV4dCBpbnB1dFxuXHRcdFx0XHRcdG5leHRRdWVzdGlvbi5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmZvY3VzKClcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0aWYgKHN1cHBvcnQudHJhbnNpdGlvbnMpIHtcblx0XHRcdHRoaXMucHJvZ3Jlc3MuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc0VuZEV2ZW50TmFtZSwgb25FbmRUcmFuc2l0aW9uRm4pXG5cdFx0fSBlbHNlIHtcblx0XHRcdG9uRW5kVHJhbnNpdGlvbkZuKClcblx0XHR9XG5cdH1cblxuXHQvLyB1cGRhdGVzIHRoZSBwcm9ncmVzcyBiYXIgYnkgc2V0dGluZyBpdHMgd2lkdGhcblx0c3RlcHNGb3JtLnByb3RvdHlwZS5fcHJvZ3Jlc3MgPSBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnByb2dyZXNzLnN0eWxlLndpZHRoID0gdGhpcy5jdXJyZW50ICogKDEwMCAvIHRoaXMucXVlc3Rpb25zQ291bnQpICsgJyUnXG5cdH1cblxuXHQvLyBjaGFuZ2VzIHRoZSBjdXJyZW50IHF1ZXN0aW9uIG51bWJlclxuXHRzdGVwc0Zvcm0ucHJvdG90eXBlLl91cGRhdGVRdWVzdGlvbk51bWJlciA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vIGZpcnN0LCBjcmVhdGUgbmV4dCBxdWVzdGlvbiBudW1iZXIgcGxhY2Vob2xkZXJcblx0XHR0aGlzLm5leHRRdWVzdGlvbk51bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuXHRcdHRoaXMubmV4dFF1ZXN0aW9uTnVtLmNsYXNzTmFtZSA9ICdudW1iZXItbmV4dCdcblx0XHR0aGlzLm5leHRRdWVzdGlvbk51bS5pbm5lckhUTUwgPSBOdW1iZXIodGhpcy5jdXJyZW50ICsgMSlcblx0XHQvLyBpbnNlcnQgaXQgaW4gdGhlIERPTVxuXHRcdHRoaXMucXVlc3Rpb25TdGF0dXMuYXBwZW5kQ2hpbGQodGhpcy5uZXh0UXVlc3Rpb25OdW0pXG5cdH1cblxuXHQvLyBzdWJtaXRzIHRoZSBmb3JtXG5cdHN0ZXBzRm9ybS5wcm90b3R5cGUuX3N1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMub3B0aW9ucy5vblN1Ym1pdCh0aGlzLmVsKVxuXHR9XG5cblx0Ly8gVE9ETyAobmV4dCB2ZXJzaW9uLi4pXG5cdC8vIHRoZSB2YWxpZGF0aW9uIGZ1bmN0aW9uXG5cdHN0ZXBzRm9ybS5wcm90b3R5cGUuX3ZhbGlkYWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly8gY3VycmVudCBxdWVzdGlvbsK0cyBpbnB1dFxuXHRcdHZhciBpbnB1dCA9IHRoaXMucXVlc3Rpb25zW3RoaXMuY3VycmVudF0ucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZVxuXHRcdGlmIChpbnB1dCA9PT0gJycpIHtcblx0XHRcdHRoaXMuX3Nob3dFcnJvcignRU1QVFlTVFInKVxuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWVcblx0fVxuXG5cdC8vIFRPRE8gKG5leHQgdmVyc2lvbi4uKVxuXHRzdGVwc0Zvcm0ucHJvdG90eXBlLl9zaG93RXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcblx0XHR2YXIgbWVzc2FnZSA9ICcnXG5cdFx0c3dpdGNoIChlcnIpIHtcblx0XHRcdGNhc2UgJ0VNUFRZU1RSJzpcblx0XHRcdFx0bWVzc2FnZSA9ICdQbGVhc2UgZmlsbCB0aGUgZmllbGQgYmVmb3JlIGNvbnRpbnVpbmcnXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHRjYXNlICdJTlZBTElERU1BSUwnOlxuXHRcdFx0XHRtZXNzYWdlID0gJ1BsZWFzZSBmaWxsIGEgdmFsaWQgZW1haWwgYWRkcmVzcydcblx0XHRcdFx0YnJlYWtcblx0XHRcdC8vIC4uLlxuXHRcdH1cblx0XHR0aGlzLmVycm9yLmlubmVySFRNTCA9IG1lc3NhZ2Vcblx0XHRjbGFzc2llLmFkZENsYXNzKHRoaXMuZXJyb3IsICdzaG93Jylcblx0fVxuXG5cdC8vIGNsZWFycy9oaWRlcyB0aGUgY3VycmVudCBlcnJvciBtZXNzYWdlXG5cdHN0ZXBzRm9ybS5wcm90b3R5cGUuX2NsZWFyRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHRjbGFzc2llLnJlbW92ZUNsYXNzKHRoaXMuZXJyb3IsICdzaG93Jylcblx0fVxuXG5cdC8vIGFkZCB0byBnbG9iYWwgbmFtZXNwYWNlXG5cdHdpbmRvdy5zdGVwc0Zvcm0gPSBzdGVwc0Zvcm1cbn0pKHdpbmRvdylcbiJdfQ=="}